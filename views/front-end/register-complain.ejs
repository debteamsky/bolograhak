<%- include('common/header') -%>
<link href="/front-end/css/complain-style.css" rel="stylesheet" type="text/css">
<%- include('common/header-banner') -%>

<section class="main-content bottom-main-content">
    <div class="complain-content">
       <div class="container">
          <h2 class="inner-main-head text-center mb-4">Fill out the form to register a complain</h2>
          <div class="row">
             <div class="col-md-6 my-auto">
                <div class="about-left-slider my-3">
                   <div class="about-50-right">
                      <div class="gr-slider3">
                         <div class="item">
                            <img src="/1691685993263-12.png" alt="img" width="298" height="434">
                         </div>
                         <div class="item">
                            <img src="/1691685993261-11.png" alt="img" width="298" height="434">
                         </div>
                      </div>
                      <div class="gr-slider4">
                         <div class="item">
                            <img src="/1691827002816-slider-small-22.png" alt="img" width="252" height="250">
                         </div>
                         <div class="item">
                            <img src="/1691685993267-13.png" alt="img" width="252" height="250">
                         </div>
                      </div>
                   </div>
                   <div class="about-50-left">
                      <div class="gr-slider1">
                         <div class="item">
                            <img src="/1692166188624-1691685839562-81.png" alt="img" width="194" height="228">
                         </div>
                         <div class="item">
                            <img src="/1691685839561-7.png" alt="img" width="194" height="228">
                         </div>
                      </div>
                      <div class="gr-slider2">
                         <div class="item">
                            <img src="/1691685993258-10.png" alt="img" width="212" height="312">
                         </div>
                         <div class="item">
                            <img src="/1691685993257-9.png" alt="img" width="212" height="312">
                         </div>
                      </div>
                   </div>
                   <div class="about-overlay-object1"><img src="/front-end/images/overlay-object1.png" alt="img" width="151" height="158"></div>
                   <div class="complain-overlay-object1"><img src="/front-end/images/complain-slider-object1.svg" alt="img" width="36" height="117"></div>
                </div>
             </div>
             <div class="col-md-6 my-auto">
                <div class="complain-register-form my-3">
                   <form>
                      <div class="row">
                         <div class="col-sm-12">
                            <div class="custom-form">
                               <select class="form-select" id="select_company" required >
                                  <option value="">Select the Company</option>
                                  <% AllCompany.forEach( company => { %>
                                    <option value="<%- company.ID %>" data-address="<%- company.main_address %>" ><%- company.company_name %></option>
                                    <% }) %>
                               </select>
                            </div>
                         </div>
                         <div class="col-sm-6">
                            <div class="custom-form">
                               <select class="form-select">
                                  <option>Select Category</option>
                                  <option>Category1</option>
                                  <option>Category2</option>
                                  <option>Category3</option>
                               </select>
                            </div>
                         </div>
                         <div class="col-sm-6">
                            <div class="custom-form">
                               <select class="form-select">
                                  <option>Select Sub-Category</option>
                                  <option>Sub-Category1</option>
                                  <option>Sub-Category2</option>
                                  <option>Sub-Category3</option>
                               </select>
                            </div>
                         </div>
                         <div class="col-sm-12">
                            <div class="custom-form">
                               <input type="text" class="form-control" placeholder="Enter the Model Number">
                            </div>
                         </div>
                         <div class="col-sm-12">
                            <div class="tag-label">Tags</div>
                            <div id="sendreviewtags">
                              <input type="text" name="emails" placeholder="Add Complain" data-gtm-form-interact-field-id="0">
                           </div>
                         </div>
                         <div class="col-sm-6">
                            <div class="custom-form">
                               <input type="text" onfocus="(this.type='date')" onblur="(this.type='text')" class="form-control" placeholder="Date of Transactions">
                            </div>
                         </div>
                         <div class="col-sm-6">
                            <div class="custom-form">
                               <input type="number" class="form-control" placeholder="Palce of Order">
                            </div>
                         </div>
                         <div class="col-sm-12">
                            <div class="custom-form">
                               <textarea name="" id="" class="form-control" placeholder="Your Message"></textarea>
                            </div>
                         </div>
                      </div>
                      <div class="text-center"><input type="submit" class="btn-default btn-warning" value="Submit"></div>
                   </form>
                </div>
             </div>
          </div>
       </div>
       <img src="/front-end/images/complain-overlay-object1.svg" alt="img" class="c-overlay1">
       <img src="/front-end/images/complain-overlay-object2.svg" alt="img" class="c-overlay2">
    </div>
 </section>

<%- include('common/footer') -%>  

<script>
$(document).ready(function () {
   $('#select_company').change(function() {
         $('#select_state').empty();
         //$("#select_state").prop('required',false);
         $('#dynamic_state_field_wrapper').hide();
         var country_id = $(this).val();
         alert(country_id);
         return false;
         $('#country_name').val(this.options[this.selectedIndex].text);
         $.ajax({
               url: '/api/states',
               method: 'POST',
               data: {country_id:country_id},
               ContentType: 'application/json',
               success: function (data) {
                  if (data.status == 'ok') {
                     $('#dynamic_state_field_wrapper').show();
                     //$("#select_state").prop('required',true);
                     $.each(data.data, function (i, item) {
                           $('#select_state').append($('<option>', { 
                              value: item.id,
                              text : item.name 
                           }));
                     });                
                  } else {
                     $('#dynamic_state_field_wrapper').hide();
                     $("#select_state").prop('required',false);
                  }
               },
               error: function (error) {
                  // Handle any errors
                  Swal.fire({
                     text: error,
                     icon: "error",
                     buttonsStyling: false,
                     confirmButtonText: "Ok, got it!",
                     customClass: {
                           confirmButton: "btn btn-primary"
                     }
                  });
                  submitButton.disabled = false;
               }
         });    
      });
   })
</script>